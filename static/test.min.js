document.querySelector("body").onload=function(){var e=0,t="Minesweeper",r=100;!function o(){e<t.length&&(document.querySelector(".textBox").innerHTML+=t.charAt(e),e++,setTimeout(o,r))}()};var timeout,blocks,i=0,timer=document.querySelector(".timer"),counting=function(){i++,timer.innerHTML=i+'<span style="font-size: 60%;"> seconds</span>',timeout=setTimeout(counting,1e3)},container=document.querySelector(".container"),toArray=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},ranNums=function(e,t){for(var r=new Array(t),o=0;o<t;o++)r[o]=new Array(t);for(o=0;o<t;o++)for(var a=0;a<t;a++){var n={a:0,b:0};n.a=Math.ceil(Math.random()*e),n.b=Math.ceil(Math.random()*e),r[o][a]=n}return r},createMaze=function(e){blocks=[e];for(var t=0;t<e;t++)blocks[t]=new Array(e);var r=function(e,t){try{if(toArray(blocks[e][t].classList).includes("bomb"))return!0}catch(e){}},o=ranNums(e-1,e/2);for(t=0;t<e;t++)for(var a=0;a<e;a++)blocks[t][a]=document.createElement("div"),blocks[t][a].classList.add("block");for(t=0;t<e/2;t++)for(a=0;a<e/2;a++)blocks[o[t][a].a][o[t][a].b].classList.add("bomb");for(t=0;t<e;t++)for(a=0;a<e;a++){var n=0;r(t,a)||(r(t-1,a-1)&&n++,r(t-1,a)&&n++,r(t-1,a+1)&&n++,r(t,a-1)&&n++,r(t,a+1)&&n++,r(t+1,a-1)&&n++,r(t+1,a)&&n++,r(t+1,a+1)&&n++,0!=n&&(blocks[t][a].textContent=n))}coverBlocks(e);for(t=0;t<e;t++)for(a=0;a<e;a++)container.appendChild(blocks[t][a])},coverBlocks=function(e){for(var t=0;t<e;t++)for(var r=0;r<e;r++){var o=document.createElement("div");o.classList.add("blockLayer"),blocks[t][r].appendChild(o);var a=0;o.addEventListener("contextmenu",function(e){e.preventDefault(),toArray(e.target.classList).includes("flag")?e.target.classList.remove("flag"):e.target.classList.add("flag"),0==a&&(counting(),a++)}),o.addEventListener("click",function(e){toArray(e.target.parentNode.classList).includes("bomb")&&!toArray(e.target.classList).includes("flag")?(e.target.style.display="none",setTimeout(gameOver,400),console.log("GAME_OVER")):toArray(e.target.classList).includes("flag")||e.target.classList.remove("blockLayer"),0==a&&(counting(),a++)})}},gameOver=function(){var e=document.querySelectorAll(".block");toArray(e).forEach(function(e){e.style.display="none"}),document.querySelector(".gameOver").style.display="flex",document.querySelector(".gOver").play(),document.querySelector(".rest").style.display="none",clearTimeout(timeout)},restart=function(){location.reload()};createMaze(8);